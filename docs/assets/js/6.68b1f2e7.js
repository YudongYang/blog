(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{374:function(t,a,s){"use strict";s.r(a);var n=s(42),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"elasticsearch-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-安装"}},[t._v("#")]),t._v(" ElasticSearch 安装")]),t._v(" "),s("p",[t._v("ElasticSearch 是一款优秀的全文搜索引擎，这个已经不用多说了。")]),t._v(" "),s("h2",{attrs:{id:"一、elasticsearch-下载并安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、elasticsearch-下载并安装"}},[t._v("#")]),t._v(" 一、ElasticSearch 下载并安装")]),t._v(" "),s("p",[t._v("提示：不要安装最新版，先看看目前一些重要插件支持到了哪个版本，例如，我要用到一个叫 IK 的插件，目前最高支持到 6.1.1 ，所以，我重新装了 6.0.0 的 ElasticSearch 和 Kibana")]),t._v(" "),s("p",[t._v("这个是 ElasticSearch 的官方安装教程"),s("a",{attrs:{href:"https://www.elastic.co/downloads/elasticsearch",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.elastic.co/downloads/elasticsearch"),s("OutboundLink")],1),t._v("\n翻译过来就是：")]),t._v(" "),s("h3",{attrs:{id:"_1、-java-环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、-java-环境"}},[t._v("#")]),t._v(" 1、 Java 环境")]),t._v(" "),s("p",[t._v("安装 ElasticSearch 要 Java 环境，建议安装 Java 8 以下（其实是我们的 Solr 在 Java 9 下亲测不可用）")]),t._v(" "),s("h3",{attrs:{id:"_2、解压"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、解压"}},[t._v("#")]),t._v(" 2、解压")]),t._v(" "),s("p",[t._v("我是下载 ZIP 的，将 Zip 文件解压，并且移动到我固定放这一类软件的目录（个人习惯放在 ~/webs/tools/ 下）")]),t._v(" "),s("h3",{attrs:{id:"_3、建立软链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、建立软链接"}},[t._v("#")]),t._v(" 3、建立软链接")]),t._v(" "),s("p",[t._v("按照官方说法，我们每次在 ElasticSearch 的文件夹下运行")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ bin/elasticsearch\n")])])]),s("p",[t._v("就可以运行了，但是，我们为了方（耍）便（酷）启动 ElasticSearch ，我们可以建立快捷方式")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s /Users/don/webs/tools/elasticsearch-6.0.0/bin/elasticsearch /usr/local/bin/elasticsearch\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s /Users/don/webs/tools/elasticsearch-6.0.0/bin/elasticsearch-env /usr/local/bin/elasticsearch-env\n")])])]),s("p",[t._v("这样子我们就可以像这样启动 ElasticSearch")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("elasticsearch\n")])])]),s("p",[t._v("看到")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-02-09T11:27:54,461"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("o.e.n.Node               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" initialized\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-02-09T11:27:54,461"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("o.e.n.Node               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("PFVD20J"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" starting "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-02-09T11:27:54,664"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("o.e.t.TransportService   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("PFVD20J"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" publish_address "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:9300"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(", bound_addresses "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fe80::1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":9300"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("::1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":9300"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:9300"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),s("p",[t._v("类似信息，那我们就成功安装并启动 ElasticSearch 了，很方便")]),t._v(" "),s("h2",{attrs:{id:"二、kibana-下载并安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、kibana-下载并安装"}},[t._v("#")]),t._v(" 二、Kibana 下载并安装")]),t._v(" "),s("p",[t._v("为什么要装 Kibana ？可以方（偷）便（懒）管理 ElasticSearch 呀～\n这个是官方安装教程"),s("a",{attrs:{href:"https://www.elastic.co/cn/downloads/kibana",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.elastic.co/cn/downloads/kibana"),s("OutboundLink")],1),t._v("\n同样简单翻译一下：")]),t._v(" "),s("h3",{attrs:{id:"_1、-elasticsearch-环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、-elasticsearch-环境"}},[t._v("#")]),t._v(" 1、 ElasticSearch 环境")]),t._v(" "),s("p",[t._v("先把第一步中的 ElasticSearch 环境部署好")]),t._v(" "),s("h3",{attrs:{id:"_2、-配置-elasticsearch-url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、-配置-elasticsearch-url"}},[t._v("#")]),t._v(" 2、 配置 ElasticSearch URL")]),t._v(" "),s("p",[t._v("如果需要修改 ElasticSearch 的 URL ，编辑 "),s("code",[t._v("config/kibana.yml")]),t._v(" 中的 "),s("code",[t._v("elasticsearch.url")]),t._v(" 属性，默认都是")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The URL of the Elasticsearch instance to use for all your queries.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#elasticsearch.url: "http://localhost:9200"')]),t._v("\n")])])]),s("h3",{attrs:{id:"_3、建立软链接-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、建立软链接-2"}},[t._v("#")]),t._v(" 3、建立软链接")]),t._v(" "),s("p",[t._v("理由同上")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s /Users/don/webs/tools/kibana-6.0.0-darwin-x86_64/bin/kibana /usr/local/bin/kibana\n")])])]),s("p",[t._v("然后我们愉快地启动")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ kibana\n  log   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("03:31:13.769"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plugin:kibana@6.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Status changed from uninitialized to green - Ready\n  log   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("03:31:13.814"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plugin:elasticsearch@6.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Status changed from uninitialized to yellow - Waiting "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" Elasticsearch\n  log   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("03:31:13.841"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plugin:console@6.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Status changed from uninitialized to green - Ready\n  log   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("03:31:13.860"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plugin:metrics@6.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Status changed from uninitialized to green - Ready\n  log   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("03:31:14.083"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plugin:timelion@6.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Status changed from uninitialized to green - Ready\n  log   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("03:31:14.087"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("listening"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Server running at http://localhost:5601\n  log   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("03:31:14.088"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ui settings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Status changed from uninitialized to yellow - Elasticsearch plugin is yellow\n  log   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("03:31:19.137"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plugin:elasticsearch@6.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Status changed from yellow to yellow - No existing Kibana index found\n  log   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("03:31:20.399"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plugin:elasticsearch@6.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Status changed from yellow to green - Kibana index ready\n  log   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("03:31:20.401"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ui settings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Status changed from yellow to green - Ready\n")])])]),s("p",[t._v("成功，打开浏览器，输入 "),s("code",[t._v("http://localhost:5601")]),t._v(" 看到这个页面，证明 kibana 跑起来了")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/201802091024276429.png",alt:"Kibana 主界面.png"}})]),t._v(" "),s("p",[t._v("但是，我们哪里忍得住，马上试一下操作 ES ，点击 "),s("code",[t._v("Dev Tools")]),t._v(" ，输入如下命令并运行")]),t._v(" "),s("div",{staticClass:"language-perl extra-class"},[s("pre",{pre:!0,attrs:{class:"language-perl"}},[s("code",[t._v("PUT "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("rcc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("employee"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"first_name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Don"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"last_name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Yang"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"age"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"about"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I love to Coding"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"interests"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"write code"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"write bug"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/img/201802091032297984.png",alt:"添加一个文档.png"}}),t._v("\n至此，证明我们的 Kibana 和 ElasticSearch 安装都是没有问题的。\n顺便一提，重新安装的时候发现，有文档说过， ES 7 计划移除 type 这个东西。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/201802091034430930.png",alt:"图片.png"}})]),t._v(" "),s("h2",{attrs:{id:"三、安装中文分词插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、安装中文分词插件"}},[t._v("#")]),t._v(" 三、安装中文分词插件")]),t._v(" "),s("p",[t._v("ES 是外国人写的呀，要搞中文的东西，原生的不能很好地支持，那么我们先装个中文分词插件吧，顺便，其他 ES 插件的安装也是差不多的。\n在这里，我以安装 IK 为例， IK 的官方 Github 有详细说明： "),s("a",{attrs:{href:"https://github.com/medcl/elasticsearch-analysis-ik",target:"_blank",rel:"noopener noreferrer"}},[t._v("medcl/elasticsearch-analysis-ik"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_1、原生分词效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、原生分词效果"}},[t._v("#")]),t._v(" 1、原生分词效果")]),t._v(" "),s("p",[t._v("那我们就先来看看 ES 原生对中文分词的效果先")]),t._v(" "),s("div",{staticClass:"language-perl extra-class"},[s("pre",{pre:!0,attrs:{class:"language-perl"}},[s("code",[t._v("GET _analyze\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"analyzer"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"standard"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"公安部：各地校车将享最高路权"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     \n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"中国驻洛杉矶领事馆遭亚裔男子枪击 嫌犯已自首"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"美国留给伊拉克的是个烂摊子吗"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"中韩渔警冲突调查：韩警平均每天扣1艘中国渔船"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("我们来看看，惨不忍睹，直接按照一个字一个字地分词")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/201802091249065175.png",alt:"默认分词结果.png"}})]),t._v(" "),s("h3",{attrs:{id:"_2、-安装-ik"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、-安装-ik"}},[t._v("#")]),t._v(" 2、 安装 IK")]),t._v(" "),s("p",[t._v("在 ElasticSearch 的目录中，运行以下命令安装插件：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ ./bin/elasticsearch-plugin "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.0.0/elasticsearch-analysis-ik-6.0.0.zip\n")])])]),s("p",[t._v("运行完以后，重启 elasticsearch")]),t._v(" "),s("h3",{attrs:{id:"_3、使用-ik-的分词效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、使用-ik-的分词效果"}},[t._v("#")]),t._v(" 3、使用 IK 的分词效果")]),t._v(" "),s("p",[t._v("直接上图，效果明显不同。而且， Ik 还可以自己配置词典，具体看文档说明。顺便一说，做分词经常会用新闻来练手起步，因为写新闻的记者文字功底比较好，而且，容易获取大量训练集。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/201802091254079374.png",alt:"IK 分词结果.png"}})]),t._v(" "),s("h2",{attrs:{id:"四、还有一点点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、还有一点点"}},[t._v("#")]),t._v(" 四、还有一点点")]),t._v(" "),s("p",[t._v("ES 和 Kibana 都跑起来了，还有什么呢？好吧，强迫症让我并不喜欢像 "),s("code",[t._v("http://localhost:5601")]),t._v(" 访问 Kibana ，我们得给它起个名字是吧。")]),t._v(" "),s("h3",{attrs:{id:"_1、-host"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、-host"}},[t._v("#")]),t._v(" 1、 host")]),t._v(" "),s("p",[t._v("在 host 文件中增加一行")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# local")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 kibana.local.com\n")])])]),s("h3",{attrs:{id:"_2、-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、-nginx"}},[t._v("#")]),t._v(" 2、 nginx")]),t._v(" "),s("p",[t._v("增加一个 nginx 配置文件 kibana.conf")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("upstream kibana "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  server "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:5601"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nserver "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  listen "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  server_name kibana.local.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  location / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    proxy_pass http://kibana/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("顺便一说，我觉得重启 nginx 之前，都先跑一下 "),s("code",[t._v("nginx -t")]),t._v(" 是很有必要的一步。")]),t._v(" "),s("h3",{attrs:{id:"_3、访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、访问"}},[t._v("#")]),t._v(" 3、访问")]),t._v(" "),s("p",[t._v("这次，我们直接访问 "),s("code",[t._v("http://kibana.local.com/app/kibana#/dev_tools/console?_g=()")]),t._v(" 就可以愉快地使用 ES 了。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/201802091050532986.png",alt:"添加 host 访问.png"}})]),t._v(" "),s("p",[t._v("哎呀，电脑卡机了。。。\n所以，这两个东西还是有点吃电脑性能的，平时我一般都是需要的时候才开，不用的时候，果断关掉它。")])])}),[],!1,null,null,null);a.default=e.exports}}]);